<nz-form-item>
  <nz-form-label *ngIf="bipFormControl.name && !hideDisplayName" [nzRequired]="required">{{ bipFormControl.name }}</nz-form-label>
  <nz-form-control
    [nzValidateStatus]="bipFormControl.touched && !bipFormControl.valid ? 'error' : ''"
    [nzErrorTip]=errorTip
  >
    <nz-select
      [ngModel]="bipFormControl.value"
      (ngModelChange)="bipFormControl.setValue($event)"
      [nzStatus]="bipFormControl.invalid && (bipFormControl.touched || bipFormControl.dirty) ? 'error' : ''"
      [nzPlaceHolder]="placeholder"
      [required]="required"
      [nzMode]="mode"
      [nzDropdownRender]="customInput ? selectInputAddItemTemplate: null"
      [nzDisabled]="disabled"
      nzAllowClear
      nzShowSearch
    >
      <nz-option *ngFor="let option of options" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
    </nz-select>
  </nz-form-control>
</nz-form-item>

<ng-template #selectInputAddItemTemplate>
  <nz-divider></nz-divider>
  <div class="container">
    <input type="text" nz-input #inputElement />
    <a class="add-item" (click)="addItem(inputElement)">
      <span nz-icon nzType="plus"></span>
      Add item
    </a>
  </div>
</ng-template>

<ng-template #errorTip>
  <bip-field-error [bipFormControl]="bipFormControl"></bip-field-error>
</ng-template>
